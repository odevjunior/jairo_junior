/**
 * Atropos 0.9.3
 * Touch-friendly 3D parallax hover effects
 * https://atroposjs.com
 *
 * Copyright 2021-2021 
 *
 * Released under the MIT License
 *
 * Released on: July 12, 2021
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Atropos={})}(this,(function(t){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t}).apply(this,arguments)}var o=function(t,e){return t.querySelector(e)},a=function(t,e){t.style.transitionDuration=e},n=function(t,e){t.style.transform=e},r=function(t,e){t.style.opacity=e},i=function(t,e,o,a){return t.addEventListener(e,o,a)},s=function(t,e,o,a){return t.removeEventListener(e,o,a)},p=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(o){void 0!==t[o]&&(e[o]=t[o])})),e};function c(t){void 0===t&&(t={});var c,d,u,l,f,v,y,h,m,g=t,M=g.el,x=g.eventsEl,L={__atropos__:!0,params:e({activeOffset:50,shadowOffset:50,shadowScale:1,durationEnter:300,durationLeave:600,rotateLock:!0,rotate:!0,rotateTouch:!0,rotateXMax:15,rotateYMax:15,rotateXInvert:!1,rotateYInvert:!1,shadow:!0,highlight:!0,onEnter:null,onLeave:null,onRotate:null},p(t||{})),destroyed:!1,isActive:!1},_=L.params,O=!0,w=!0,b=function(t){var e=t.rotateXPercentage,o=void 0===e?0:e,i=t.rotateYPercentage,s=void 0===i?0:i,p=t.duration,c=t.opacityOnly;(function(t,e){return t.querySelectorAll(e)})(M,"[data-atropos-offset], [data-atropos-opacity]").forEach((function(t){a(t,p);var e=function(t){if(t.dataset.atroposOpacity&&"string"==typeof t.dataset.atroposOpacity)return t.dataset.atroposOpacity.split(";").map((function(t){return parseFloat(t)}))}(t);if(0===o&&0===s)c||n(t,"translate3d(0, 0, 0)"),e&&r(t,e[0]);else{var i=parseFloat(t.dataset.atroposOffset)/100;if(Number.isNaN(i)||c||n(t,"translate3d("+-s*-i+"%, "+o*-i+"%, 0)"),e){var d=e[0],u=e[1],l=Math.max(Math.abs(o),Math.abs(s));r(t,d+(u-d)*l/100)}}}))},E=function(t){"pointerdown"===t.type&&"mouse"===t.pointerType||"pointerenter"===t.type&&"mouse"!==t.pointerType||("pointerdown"===t.type&&t.preventDefault(),M.classList.add("atropos-active"),a(c,"0ms"),l=void 0,f=void 0,O=!0,w=!0,n(d,"translate3d(0,0, "+_.activeOffset+"px)"),a(d,(_.rotateLock?_.durationEnter:0)+"ms"),y&&a(y,(_.rotateLock?_.durationEnter:0)+"ms"),L.isActive=!0,"function"==typeof _.onEnter&&_.onEnter())},X=function(t){if(_.rotate&&L.isActive){if("mouse"!==t.pointerType){if(!_.rotateTouch)return;t.preventDefault()}var e=t.clientX,o=t.clientY;v||(v=M.getBoundingClientRect());var r=v,i=r.top,s=r.left,p=r.width,d=r.height,u=p/2,y=d/2,m=e-s,g=o-i,x=_.rotateYMax*(m-u)/(p/2)*-1,E=_.rotateXMax*(g-y)/(d/2);_.rotateLock&&(void 0===f&&(f=x,w=!0),void 0===l&&(l=E,O=!0),w&&(f<0&&(x<0&&(x=0),x>0&&(w=!1)),f>0&&(x>0&&(x=0),x<0&&(w=!1))),O&&(l<0&&(E<0&&(E=0),E>0&&(O=!1)),l>0&&(E>0&&(E=0),E<0&&(O=!1)))),E=Math.min(Math.max(-E,-_.rotateXMax),_.rotateXMax),_.rotateXInvert&&(E=-E),x=Math.min(Math.max(-x,-_.rotateYMax),_.rotateYMax),_.rotateYInvert&&(x=-x),n(c,"translate3d(0,0,0) rotateX("+E+"deg) rotateY("+x+"deg)");var X=E/_.rotateXMax*100,Y=x/_.rotateYMax*100;h&&(a(h,"0ms"),n(h,"translate3d("+.25*-Y+"%, "+.25*X+"%, 0)"),h.style.opacity=Math.max(Math.abs(X),Math.abs(Y))/100),b({rotateXPercentage:X,rotateYPercentage:Y,duration:"0ms"}),"function"==typeof _.onRotate&&_.onRotate(E,x)}},Y=function(t){v=void 0,L.isActive&&(t&&"pointerup"===t.type&&"mouse"===t.pointerType||t&&"pointerleave"===t.type&&"mouse"!==t.pointerType||(M.classList.remove("atropos-active"),n(d,"translate3d(0,0, 0px)"),a(d,_.durationLeave+"ms"),y&&a(y,_.durationLeave+"ms"),h&&(a(h,_.durationLeave+"ms"),n(h,"translate3d(0, 0, 0)"),h.style.opacity=0),a(c,_.durationLeave+"ms"),n(c,"translate3d(0,0,0) rotateX(0deg) rotateY(0deg)"),b({duration:_.durationLeave+"ms"}),L.isActive=!1,"function"==typeof _.onRotate&&_.onRotate(0,0),"function"==typeof _.onLeave&&_.onLeave()))},T=function(t){var e=t.target;!M.contains(e)&&e!==M&&L.isActive&&Y()};return L.destroy=function(){L.destroyed=!0,s(document,"click",T),s(x,"pointerdown",E),s(x,"pointerenter",E),s(x,"pointermove",X),s(x,"pointerleave",Y),s(x,"pointerup",Y),s(x,"lostpointercapture",Y),delete M.__atropos__},"string"==typeof M&&(M=o(document,M)),M&&(M.__atropos__||(void 0!==x?"string"==typeof x&&(x=o(document,x)):x=M,Object.assign(L,{el:M}),c=o(M,".atropos-rotate"),d=o(M,".atropos-scale"),u=o(M,".atropos-inner"),M.__atropos__=L)),M&&x&&(_.shadow&&((y=o(M,".atropos-shadow"))||((y=document.createElement("span")).classList.add("atropos-shadow"),m=!0),n(y,"translate3d(0,0,-"+_.shadowOffset+"px) scale("+_.shadowScale+")"),m&&c.appendChild(y)),_.highlight&&function(){var t;(h=o(M,".atropos-highlight"))||((h=document.createElement("span")).classList.add("atropos-highlight"),t=!0),n(h,"translate3d(0,0,0)"),t&&u.appendChild(h)}(),_.rotateTouch&&M.classList.add("atropos-rotate-touch"),o(M,"[data-atropos-opacity]")&&b({opacityOnly:!0}),i(document,"click",T),i(x,"pointerdown",E),i(x,"pointerenter",E),i(x,"pointermove",X),i(x,"pointerleave",Y),i(x,"pointerup",Y),i(x,"lostpointercapture",Y)),L}t.Atropos=c,t.default=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=atropos.min.js.map